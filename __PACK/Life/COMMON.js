Life.GenerateNotiMessage=METHOD({run:function(e,t){"comment"===e.type?Life.UserModel.get(e.targetUserId,function(i){Life.ArticleModel.get(e.targetId,function(e){t("/board/all/"+e.id,i.nickname+"님이 ["+e.title+"]에 댓글을 남겼습니다.")})}):"like-article"===e.type?Life.UserModel.get(e.targetUserId,function(i){Life.ArticleModel.get(e.targetId,function(e){t("/board/all/"+e.id,i.nickname+"님이 ["+e.title+"]을 좋아합니다.")})}):"like-comment"===e.type?Life.UserModel.get(e.targetUserId,function(i){Life.CommentModel.get(e.targetId,function(e){t("/board/all/"+e.articleId,i.nickname+"님이 댓글 ["+e.content+"]을 좋아합니다.")})}):"tag-article"===e.type?Life.UserModel.get(e.targetUserId,function(i){Life.ArticleModel.get(e.targetId,function(e){t("/board/all/"+e.id,i.nickname+"님이 ["+e.title+"]에 나를 태그했습니다.")})}):"tag-comment"===e.type&&Life.UserModel.get(e.targetUserId,function(i){Life.CommentModel.get(e.targetId,function(e){t("/board/all/"+e.articleId,i.nickname+"님이 댓글 ["+e.content+"]에 나를 태그했습니다.")})})}}),Life.ReplaceUserTagToLink=METHOD({run:function(e,t){var i,n,r=0;(n=function(){for(i=void 0;r<e.length+1;r+=1){if(void 0!==i&&(r===e.length||"@"===e[r]||" "===e[r]||"	"===e[r]||"\n"===e[r]||"\r"===e[r]||"<"===e[r]))return void Life.UserModel.get({filter:{nickname:e.substring(i,r)}},{notExists:function(){n()},success:function(t){var o='<a href="/user/'+t.id+'">'+t.nickname+"</a>";e=e.substring(0,i-1)+o+(r<e.length?e.substring(r):""),r+=o.length-(r-i)-1,n()}});r<e.length&&"@"===e[r]&&(i=r+1)}t(e)})()}}),Life.ArticleLikeModel=OBJECT({preset:function(){"use strict";return Life.MODEL},params:function(){"use strict";var e={articleId:{notEmpty:!0,id:!0},userId:{notEmpty:!0,id:!0}};return{name:"ArticleLike",methodConfig:{create:{valid:VALID(e)},update:!1,remove:!1}}}}),Life.ArticleModel=OBJECT({preset:function(){"use strict";return Life.MODEL},params:function(){"use strict";var e={boardId:{notEmpty:!0,id:!0},categoryId:{id:!0},writerId:{notEmpty:!0,id:!0},title:{notEmpty:!0,size:{max:255}},content:{size:{max:3e4}},html:!0,viewCount:{notEmpty:!0,integer:!0},lastViewTime:{date:!0},commentCount:{notEmpty:!0,integer:!0},lastCommentTime:{date:!0},likeCount:{notEmpty:!0,integer:!0}};return{name:"Article",initData:{viewCount:0,commentCount:0,likeCount:0},methodConfig:{create:{valid:VALID(e),authKey:"writerId",role:Life.ROLE.USER},update:{valid:VALID(e),authKey:"writerId",role:Life.ROLE.USER},remove:{authKey:"writerId",role:Life.ROLE.USER}}}}}),Life.BoardModel=OBJECT({preset:function(){"use strict";return Life.MODEL},params:function(){"use strict";var e={name:{notEmpty:!0,size:{max:255}},description:{size:{max:3e3}},html:!0,index:{real:!0},lastArticleTime:{date:!0},articleCount:{notEmpty:!0,integer:!0}};return{name:"Board",initData:{articleCount:0},methodConfig:{create:{valid:VALID(e),role:Life.ROLE.MANAGER},update:{valid:VALID(e),role:Life.ROLE.MANAGER},remove:{role:Life.ROLE.MANAGER}}}}}),Life.CategoryModel=OBJECT({preset:function(){"use strict";return Life.MODEL},params:function(){"use strict";var e={boardId:{notEmpty:!0,id:!0},category:{notEmpty:!0,size:{max:255}},lastArticleTime:{date:!0},articleCount:{notEmpty:!0,integer:!0}};return{name:"Category",initData:{articleCount:0},methodConfig:{create:{valid:VALID(e),role:Life.ROLE.MANAGER},update:{valid:VALID(e),role:Life.ROLE.MANAGER},remove:{role:Life.ROLE.MANAGER}}}}}),Life.ChatModel=OBJECT({preset:function(){"use strict";return Life.MODEL},params:function(){"use strict";var e={writerId:{notEmpty:!0,id:!0},writerNickname:{size:{min:2,max:20}},writerIconFileId:{id:!0},content:{notEmpty:!0,size:{max:1e3}}};return{name:"Chat",isNotUsingHistory:!0,methodConfig:{create:{valid:VALID(e)},update:!1,remove:!1}}}}),Life.CommentLikeModel=OBJECT({preset:function(){"use strict";return Life.MODEL},params:function(){"use strict";var e={commentId:{notEmpty:!0,id:!0},userId:{notEmpty:!0,id:!0}};return{name:"CommentLike",methodConfig:{create:{valid:VALID(e)},update:!1,remove:!1}}}}),Life.CommentModel=OBJECT({preset:function(){"use strict";return Life.MODEL},params:function(){"use strict";var e={writerId:{notEmpty:!0,id:!0},articleId:{notEmpty:!0,id:!0},content:{notEmpty:!0,size:{max:1e3}},likeCount:{notEmpty:!0,integer:!0}};return{name:"Comment",initData:{likeCount:0},methodConfig:{create:{valid:VALID(e)},update:{valid:VALID(e)}}}}}),Life.JoinKeyModel=OBJECT({preset:function(){"use strict";return Life.MODEL},params:function(){"use strict";return{name:"JoinKey",methodConfig:{create:!1,update:!1,remove:!1}}}}),Life.NotiModel=OBJECT({preset:function(){"use strict";return Life.MODEL},params:function(){"use strict";var e={userId:{notEmpty:!0,id:!0},targetUserId:{notEmpty:!0,id:!0},type:{notEmpty:!0,one:["comment","like-article","liek-comment","tag-article","tag-comment"]},targetId:{id:!0}};return{name:"Noti",isNotUsingHistory:!0,methodConfig:{create:{valid:VALID(e),role:Life.ROLE.ADMIN},update:!1,remove:!1}}}}),Life.ResetEmailKeyModel=OBJECT({preset:function(){"use strict";return Life.MODEL},params:function(){"use strict";return{name:"ResetEmailKey",methodConfig:{create:!1,update:!1,remove:!1}}}}),Life.ResetPasswordKeyModel=OBJECT({preset:function(){"use strict";return Life.MODEL},params:function(){"use strict";return{name:"ResetPasswordKey",methodConfig:{create:!1,update:!1,remove:!1}}}}),Life.SessionKeyModel=OBJECT({preset:function(){"use strict";return Life.MODEL},params:function(){"use strict";return{name:"SessionKey",methodConfig:{create:!1,update:!1,remove:!1}}}}),Life.UserModel=OBJECT({preset:function(){"use strict";return Life.MODEL},params:function(){"use strict";var e={username:{notEmpty:!0,size:{min:4,max:20},username:!0},nickname:{notEmpty:!0,size:{min:2,max:20}},email:{notEmpty:!0,size:{min:5,max:320},email:!0},password:{notEmpty:!0,size:{min:4,max:20}},loginCount:{notEmpty:!0,integer:!0},lastLoginTime:{date:!0},isBanned:{bool:!0},isLeft:{bool:!0},isAgreedTerms:{notEmpty:!0,equal:!0},isAgreedPrivacy:{notEmpty:!0,equal:!0},roles:{array:!0},iconFileId:{id:!0},lastArticleTime:{date:!0},articleCount:{notEmpty:!0,integer:!0},lastCommentTime:{date:!0},commentCount:{notEmpty:!0,integer:!0},intoduce:{size:{max:3e4}},html:!0};return{name:"User",initData:{loginCount:0,articleCount:0,commentCount:0},methodConfig:{create:{valid:VALID(e)},update:{valid:VALID(e)},remove:!1},loginValid:VALID({username:e.username,password:e.password})}}}),Life("ROLE").ADMIN="Admin",Life("ROLE").MANAGER="Manager",Life("ROLE").USER="User";